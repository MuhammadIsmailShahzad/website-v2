(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{265:function(e,t,a){"use strict";a.r(t);var o=a(0),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"context"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#context"}},[e._v("#")]),e._v(" Context")]),e._v(" "),a("h3",{attrs:{id:"problem-we-were-trying-to-solve"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#problem-we-were-trying-to-solve"}},[e._v("#")]),e._v(" Problem We Were Trying To Solve")]),e._v(" "),a("p",[e._v("Sam Payne and his team at the Pacific Northwest National Laboratory"),a("br"),e._v("\n(PNNL) have designed an application called"),a("br"),e._v(" "),a("a",{attrs:{href:"https://adbio.pnnl.gov/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Active Data Biology"),a("OutboundLink")],1),e._v(" (ADBio) which is an"),a("br"),e._v("\ninteractive web-based suite of tools for analyzing high-throughput"),a("br"),e._v("\nomics (a set of related fields of study in biology).  The goal is to"),a("br"),e._v("\nvisualize and analyze datasets while still enabling seamless"),a("br"),e._v("\ncollaboration between computational and non-computational domain"),a("br"),e._v("\nexperts.  The tool provides several views on the same data"),a("br"),e._v("\nfacilitating different avenues of investigation.")]),e._v(" "),a("p",[e._v("One of the high level goals of ADBio was to make collaborative data"),a("br"),e._v("\nanalysis work in a similar manner to collaborative software"),a("br"),e._v("\ndevelopment (versioned, asynchronous, flexible, sharable, global). You"),a("br"),e._v("\ncan read more of the motivation in the Open Knowledge International"),a("br"),e._v("\nblog post"),a("br"),e._v(" "),a("a",{attrs:{href:"https://blog.okfn.org/2016/11/29/git-for-data-analysis-why-version-control-is-essential-collaboration-public-trust/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Git for Data Analysis – why version control is essential for collaboration and for gaining public trust"),a("OutboundLink")],1),a("br"),e._v("\nwritten by Sam Payne as part of the pilot.  To facilitate this goal,"),a("br"),e._v("\nSam and his team used version-controlled repositories as the storage"),a("br"),e._v("\nmechanism for all required resources. Data, software (for conducting"),a("br"),e._v("\nanalyses), and insights (gained from these analyses) for the project"),a("br"),e._v("\nall get checked into the same repository.  ADBio pulls data and"),a("br"),e._v("\nsoftware directly from the repository and serves up an interactive"),a("br"),e._v("\nvisualization for data exploration. Any insight you choose to record"),a("br"),e._v("\ngets checked back into the repository.")]),e._v(" "),a("p",[a("img",{attrs:{src:"adbio.png",alt:"ADBio"}})]),e._v(" "),a("p",[e._v("When we were first approached by Sam and his team, they outlined"),a("br"),e._v("\nseveral use cases for which it might be valuable to have formal Data"),a("br"),e._v("\nPackage support (with the benefit of the associated tooling) within"),a("br"),e._v("\ntheir framework.  In the end, we decided to work on the first:"),a("br"),e._v(" "),a("em",[e._v("validating metadata associated with ADBio repositories")]),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"use-case-validating-metadata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-case-validating-metadata"}},[e._v("#")]),e._v(" Use Case: Validating Metadata")]),e._v(" "),a("p",[e._v("To initiate a project in Active Data Biology, users start with a"),a("br"),e._v("\ndataset of quantitative molecular measurements across multiple samples"),a("br"),e._v("\ncombined with metadata for each sample.  Each repository on ADBio"),a("br"),e._v("\ncontains these two types of files. For clinical experiments, the"),a("br"),e._v("\nmetadata may include information about a participant’s age, gender,"),a("br"),e._v("\ndisease stage, etc. For an environmental experiment, this may be"),a("br"),e._v("\ngeographical location, temperature, time of day, etc. One"),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/ActiveDataBio/ADB-User-Study/blob/master/metadata.tsv",target:"_blank",rel:"noopener noreferrer"}},[e._v("example"),a("OutboundLink")],1),a("br"),e._v("\nof a metadata file can be found at on the ADB-User-Study project"),a("br"),e._v("\nrepository under the"),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/ActiveDataBio/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ActiveDataBio organization on GitHub"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("The metadata file can be updated or expanded during the course of"),a("br"),e._v("\nanalysis. This is currently not easily done within ADBio. Moreover,"),a("br"),e._v("\nthe researchers lacked any formal schema describing the metadata file"),a("br"),e._v("\nand its contents. It was suggested that having a Data Package"),a("br"),e._v("\nformalizing the metadata file would be a benefit.  This would also"),a("br"),e._v("\nenable validation of the contents, according to the schema stored as"),a("br"),e._v("\npart of the Data Package. Finally, the researchers also requested the"),a("br"),e._v("\ndevelopment of a web UI to edit the metadata file that would be an"),a("br"),e._v("\napplication within the ADBio suite. Users could then update the schema"),a("br"),e._v("\nonline, and it would be versioned through GitHub like everything else."),a("br"),e._v("\nScenario")]),e._v(" "),a("p",[e._v("A user gets updated survival information for patients in a clinical"),a("br"),e._v("\nstudy and wants to update the metadata associated with this"),a("br"),e._v("\nexperiment. Within ADBio, the user opens the “Metadata” app and enters"),a("br"),e._v("\nnew information into the user interface. When finished, user clicks a"),a("br"),e._v("\n‘save’ button and the data is validated against the schema. If it"),a("br"),e._v("\nfails, the specific cells are highlighted and annotated with failure"),a("br"),e._v("\ncodes. If it passes, the new metadata file is checked into the"),a("br"),e._v("\nrepository with a user-specified comment for the commit message.")]),e._v(" "),a("h2",{attrs:{id:"the-work"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-work"}},[e._v("#")]),e._v(" The Work")]),e._v(" "),a("h3",{attrs:{id:"what-did-we-do"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-did-we-do"}},[e._v("#")]),e._v(" What Did We Do")]),e._v(" "),a("p",[e._v("This was a valuable pilot for several reasons.  For one, the"),a("br"),e._v("\nresearchers interests in openness and the value of public, versioned"),a("br"),e._v("\ninfrastructure like GitHub for tabular, flat file datasets aligned"),a("br"),e._v("\nwell with the overall interests of the project.  OKI’s first step was"),a("br"),e._v("\nto start a new repository to track progress"),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/frictionlessdata/pilot-pnnl",target:"_blank",rel:"noopener noreferrer"}},[e._v("in the open"),a("OutboundLink")],1),e._v(".  In"),a("br"),e._v("\naddition, OKI also created their own"),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/frictionlessdata/ADB-User-Study",target:"_blank",rel:"noopener noreferrer"}},[e._v("“fork” (i.e. versioned copy) of the repository"),a("OutboundLink")],1),a("br"),e._v("\nin which PNNL stored their exemplar metadata file.")]),e._v(" "),a("h3",{attrs:{id:"data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data"}},[e._v("#")]),e._v(" Data")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("metadata.tsv")]),e._v(" file is specially formatted compared to other TSV"),a("br"),e._v("\n(tab-separated values) files in that it contains two extra rows below"),a("br"),e._v("\nthe header for describing a column’s "),a("em",[e._v("methods")]),e._v(" and "),a("em",[e._v("descriptions")]),e._v("."),a("br"),e._v("\nWhile this is a neat way of storing metadata for each column, it is"),a("br"),e._v("\nnot particularly standard as ordinarily, we would expect all rows"),a("br"),e._v("\nbelow the header contain actual data.  Nevertheless, it provided a"),a("br"),e._v("\ngreat start to the development of a custom schema.  We used the"),a("br"),e._v("\ninformation stored in these rows to generate a"),a("br"),e._v(" "),a("router-link",{attrs:{to:"/specs/table-schema/"}},[e._v("Table Schema")]),e._v(" for the"),a("br"),e._v("\ndata compatible with our software"),a("br"),e._v("\n("),a("a",{attrs:{href:"https://github.com/frictionlessdata/ADB-User-Study/blob/master/metadata-schema.json",target:"_blank",rel:"noopener noreferrer"}},[e._v("the schema"),a("OutboundLink")],1),e._v(").")],1),e._v(" "),a("p",[e._v("For instance, if a column in the original metadata.tsv file had the"),a("br"),e._v("\ntext "),a("code",[e._v("categorical")]),e._v(" in its "),a("code",[e._v("#methods")]),e._v(" row, we knew that this translated"),a("br"),e._v("\nvery well to our"),a("br"),e._v(" "),a("router-link",{attrs:{to:"/specs/table-schema/#constraints"}},[e._v("enum (short for enumerated list) constraint")]),e._v("."),a("br"),e._v("\nHowever, this was not enough.  We had to infer from the values below"),a("br"),e._v("\nin the dataset which values were actually valid categorical values for"),a("br"),e._v("\nthat column.  So, for example, the "),a("code",[e._v("PlatinumStatus")]),e._v(" column could only"),a("br"),e._v("\nbe one of "),a("code",[e._v("Resistant")]),e._v(", "),a("code",[e._v("Sensitive")]),e._v(", or "),a("code",[e._v("Tooearly")]),e._v(" leading to the"),a("br"),e._v("\nfollowing constraint definition in Table Schema:")],1),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"constraints": {\n    "enum": [\n        "Resistant",\n        "Sensitive",\n        "Tooearly"\n    ]\n}\n')])])]),a("p",[e._v("More straightforward was the translation of the "),a("code",[e._v("#descriptions")]),e._v(" row;"),a("br"),e._v("\neach description was translated directly into a"),a("br"),e._v(" "),a("router-link",{attrs:{to:"/specs/table-schema/#description"}},[e._v("description attribute")]),a("br"),e._v("\non the column:")],1),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"description": "It describes whether the patient was resistant to platinum (chemotherapy) treatment",\n')])])]),a("p",[e._v("What the "),a("code",[e._v("metadata.tsv")]),e._v(" file did not record at all was any information"),a("br"),e._v("\nabout the “type” of value expected for each column.  For instance, the"),a("br"),e._v(" "),a("code",[e._v("days_to_death")]),e._v(" column would never contain a value that was of a"),a("br"),e._v("\n“geopoint” type, but rather always a number (and a whole number at"),a("br"),e._v("\nthat).  Likewise, the "),a("code",[e._v("additional_immuno_therapy")]),e._v(" column would always"),a("br"),e._v("\nbe a True/False (i.e. boolean) value.  With PNNL’s domain expertise,"),a("br"),e._v("\nOKI added these expectations to the schema so that "),a("code",[e._v("days_to_death")]),a("br"),e._v("\ncould be relied upon to always be an integer and"),a("br"),e._v(" "),a("code",[e._v("additional_immuno_therapy")]),e._v(" a boolean (True/False) value.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n    "name": "additional_immuno_therapy",\n    "type": "boolean"\n}\n')])])]),a("p",[e._v("Up to this point, the dataset provided by PNNL was adequately"),a("br"),e._v("\ndescribed by our specifications.  One challenge was how to deal,"),a("br"),e._v("\nthough, with the many missing values in the dataset.  While we had"),a("br"),e._v("\ndiscussion on the"),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/frictionlessdata/specs/issues/97",target:"_blank",rel:"noopener noreferrer"}},[e._v("topic"),a("OutboundLink")],1),e._v(", we had"),a("br"),e._v("\nnot yet established a formal way of specifying.  In part due to"),a("br"),e._v("\nobserved usage and the needs of the pilot, we formalized an approach"),a("br"),e._v("\nto recording information about which values signal missing data in"),a("br"),e._v(" "),a("a",{attrs:{href:"https://twitter.com/OKFNLabs/status/765568650699018241",target:"_blank",rel:"noopener noreferrer"}},[e._v("mid-August 2016"),a("OutboundLink")],1),e._v("."),a("br"),e._v("\nWe added this information to the Table Schema:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"missingValues": [\n    "[Not Applicable]",\n    "[Not Available]",\n    "[Pending]"\n]\n')])])]),a("h3",{attrs:{id:"software"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#software"}},[e._v("#")]),e._v(" Software")]),e._v(" "),a("p",[e._v("goodtables had"),a("br"),e._v(" "),a("a",{attrs:{href:"http://okfnlabs.org/blog/2015/02/20/introducing-goodtables.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("existed"),a("OutboundLink")],1),a("br"),e._v("\nas a Python library and web application developed by Open Knowledge"),a("br"),e._v("\nInternational to support the validation of tabular datasets both in"),a("br"),e._v("\nterms of structure and also with respect to a published schema as"),a("br"),e._v("\ndescribed above. This software was put to good use in a local government"),a("br"),e._v("\ncontext.")]),e._v(" "),a("p",[e._v("For this pilot, and in coordination with other work in the project, we"),a("br"),e._v("\ntook the opportunity to drastically improve the software to support the"),a("br"),e._v("\nonline, automated validation referenced in the above use case.  We"),a("br"),e._v("\ntook as inspiration the workflow in use in software development"),a("br"),e._v("\nenvironments around the world—continuous automated testing—and"),a("br"),e._v("\napplied to data.  This involved not only updating the Python library"),a("br"),e._v("\nto reflect the specification development to date, but the design of a"),a("br"),e._v("\nnew data publishing workflow that is applicable beyond PNNL’s needs."),a("br"),e._v("\nIt is designed to be extensible, so that custom checks and custom"),a("br"),e._v("\nbackends (e.g. other places where one might publish a dataset) can"),a("br"),e._v("\ntake advantage of this workflow.  For example, in addition to datasets"),a("br"),e._v("\nstored on GitHub, the new goodtables supports the automated"),a("br"),e._v("\nvalidation of datasets stored on S3 and we are currently working on"),a("br"),e._v("\nvalidation of datasets stored on CKAN.")]),e._v(" "),a("p",[e._v("goodtables supports validation of tabular data in GitHub repositories"),a("br"),e._v("\nto solve the use case for Active Data Biology.  On every update to the"),a("br"),e._v("\ndataset, a validation task is run on the stored data.")]),e._v(" "),a("h2",{attrs:{id:"review"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#review"}},[e._v("#")]),e._v(" Review")]),e._v(" "),a("h3",{attrs:{id:"how-effective-was-it"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-effective-was-it"}},[e._v("#")]),e._v(" How Effective Was It")]),e._v(" "),a("p",[e._v("The omics team at PNNL are still investigating the use of"),a("br"),e._v(" "),a("a",{attrs:{href:"http://goodtables.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("goodtables.io"),a("OutboundLink")],1),e._v(" for their use case, but early reports are positive:")]),e._v(" "),a("blockquote",[a("p",[e._v("We created a schema and started testing it. So far so good! I think this is going to work for a lot of projects which want to store data in a repo.")])]),e._v(" "),a("p",[e._v("As a real test of the generality of goodtables, we also tried to apply"),a("br"),e._v("\nit to another project. This second project is a public repository"),a("br"),e._v("\ndescribing measurements of metabolites in ion mobility mass"),a("br"),e._v("\nspectrometry. Here, we are again using flat files for structured"),a("br"),e._v("\ndata. The data is actually a library of information describing"),a("br"),e._v("\nmetabolites, and we know that the library will be growing. So it was"),a("br"),e._v("\nvery similar to the ADBio project, in that the curated data would be"),a("br"),e._v("\ncontinually updated. (see"),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/PNNL-Comp-Mass-Spec/MetabolomicsCCS",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/PNNL-Comp-Mass-Spec/MetabolomicsCCS"),a("OutboundLink")],1),e._v(" for the"),a("br"),e._v("\nproject itself, and"),a("br"),e._v(" "),a("a",{attrs:{href:"https://github.com/PNNL-Comp-Mass-Spec/metaboliteValidation",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/PNNL-Comp-Mass-Spec/metaboliteValidation"),a("OutboundLink")],1),e._v(" for a"),a("br"),e._v("\nvalidation script that leverages goodtables)")]),e._v(" "),a("p",[e._v("Of course, technical issues that they have encountered have been"),a("br"),e._v("\ntranslated in GitHub issues and are being addressed:")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/frictionlessdata/goodtables.io/issues/233",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/frictionlessdata/goodtables.io/issues/233"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/frictionlessdata/goodtables.io/pull/235",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/frictionlessdata/goodtables.io/pull/235"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/frictionlessdata/goodtables.io/issues/232",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/frictionlessdata/goodtables.io/issues/232"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);